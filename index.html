<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Event 2025</title>
    <link rel="stylesheet" href="src/Css/styles.css" />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar" style="display: none">
      <div class="nav-content">
        <div class="nav-title">
          <span class="font-aktiv">Digital Event</span>
          <span class="font-fraunces">Edition 2025</span>
        </div>
        <button id="back-button" class="back-button" onclick="window.location.reload()">
          <img src="src/assets/icons/icn.back.svg" alt="Retour" />
        </button>
        <button id="burger-menu" class="burger-button">
          <img src="src/assets/icons/obsolete.svg" alt="Menu" />
        </button>
      </div>
    </nav>

    <!-- Loader -->
    <div id="loading-container">
      <div class="loading-title">
        <span class="font-aktiv">Digital Event</span>
        <span class="font-fraunces">Edition 2025</span>
      </div>
      <div id="percentage">0%</div>
      <div id="mirror-percentage">0%</div>

      <div class="loader-footer">
        <img
          src="src/assets/icons/esd_logo_NoTexte_Jade 1.svg"
          alt="esd icon"
          width="40"
          height="40"
        />
        <p>Ecole Supérieure du Digital</p>
      </div>
    </div>

    <!-- Scene -->

    <div id="main-content" style="display: none">
      <div class="scene-wrapper">

        <div id="scene-container"></div>
        <div class="scroll-progress-container">
          <div class="scroll-progress-bar">
            <div class="scroll-progress-fill"></div>
          </div>
        </div>
        <div class="mirror-instructions">
          <p class="instruction-title">
            <img src="src/assets/icons/click-icon.svg" alt="Click" class="click-icon">
            Cassez le miroir
          </p>
          <p class="instruction-subtitle">
            Cliquez pour découvrir les ateliers
          </p>
        </div>
        
        <div class="fragment-instructions" style="display: none">
          <p class="instruction-title">
            <img src="src/assets/icons/click-icon.svg" alt="Click" class="click-icon">
            <span class="font-aktiv">Sélectionnez un</span>
            <span class="font-fraunces">fragment</span>
          </p>
          <p class="instruction-subtitle">Découvrez les ateliers en détail</p>
        </div> 

    <!-- Footer  -->
    <footer class="footer" style="display: none">
      <div class="footer-content">
       <div class="footer-left">
        <audio id="background-music" loop>
          <source src="src/sound/sample home..mp3" type="audio/mpeg">
          Votre navigateur ne supporte pas l'élément audio.
      </audio>
      <audio id="mirror-break-sound">
        <source src="src/sound/sound effect mirror crash.mp3" type="audio/mpeg">
    </audio>
    <audio id="fragment-select-sound">
      <source src="src/sound/sound effect fragment select.mp3" type="audio/mpeg">
  </audio>
  <audio id="button-press-sound">
    <source src="src/sound/sound effect button press.mp3" type="audio/mpeg">
</audio>
  <img
    src="src/assets/icons/sound-on.svg"
    alt="Sound icon"
    width="40"
    height="40"
    onclick="toggleMusic()"
  />
</div>
        <div class="footer-right">
          <a href="https://esd-digital-event.com/mentions/" target="_blank">Mentions légales</a>
          <a href="https://esd-digital-event.com/data/" target="_blank">Politique de confidentialité</a>
        </div>
      </div>
    </footer>

    <!-- Ajoutez le menu latéral -->
    <div id="side-menu" class="side-menu">
      <div class="menu-content">
        <div class="menu-header">
            <p>Ateliers</p>
            <button id="close-menu" class="close-button">
          <svg width="24" height="24" viewBox="0 0 24 24">
            <path
              d="M18 6L6 18"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
            />
            <path
              d="M6 6L18 18"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button>
    </div>
        
        <ul class="menu-list">
          <li><a href="#" data-atelier="1">Site web</a></li>
          <li><a href="#" data-atelier="2">Video Mapping</a></li>
          <li><a href="#" data-atelier="3">Creative Coding</a></li>
          <li><a href="#" data-atelier="4">Gaming & Pop-corn</a></li>
          <li><a href="#" data-atelier="5">Video</a></li>
          <li><a href="#" data-atelier="6">Escape game</a></li>
          <li><a href="#" data-atelier="7">Podcast</a></li>
          <li><a href="#" data-atelier="8">Photo reportage</a></li>
          <li><a href="#" data-atelier="9">AI Driven visual stories</a></li>
          <li><a href="#" data-atelier="10">Game design</a></li>
          <li><a href="#" data-atelier="11">Organisation</a></li>
          <!-- <button class="btn-main-CTA" onclick="window.location.reload()">Néo-miroir</button> -->
        </ul>
        <div class="loader-burger">
        <img
          src="src/assets/icons/esd_logo_NoTexte_Jade 1.svg"
          alt="esd icon"
          width="40"
          height="40"
        />
        <a href="https://esd-digital-event.com/mentions/" target="_blank">Mentions légales</a>
        <a href="https://esd-digital-event.com/data/" target="_blank">Politique de confidentialité</a>
      </div>
      </div>
      
    </div>
    </div>

    <!-- Importation de Three.js -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
          "three/examples/jsm/controls/OrbitControls.js": "https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js"
        }
      }
    </script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- Application -->
    <script type="module" src="src/Js/Loader.js"></script>
    <script src="./src/Js/menu.js"></script>
    <!-- <script type="module" src="src/Js/AtelierGallerySceneNew.js"></script> -->
    <script>
    // Définir toggleMusic globalement
    window.toggleMusic = function() {
        const music = document.getElementById('background-music');
        const soundIcon = document.querySelector('.footer-left img');

        if (music.paused) {
            music.play();
            soundIcon.src = "src/assets/icons/sound-on.svg";
        } else {
            music.pause();
            soundIcon.src = "src/assets/icons/sound-off.svg";
        }
    };

    document.addEventListener('DOMContentLoaded', function() {
        const music = document.getElementById('background-music');
        const soundIcon = document.querySelector('.footer-left img');
        music.volume = 0.2; // Set volume to 20%
        
        // Initialiser l'état du son comme désactivé au démarrage
        music.pause();
        soundIcon.src = "src/assets/icons/sound-off.svg";

        // Gérer la visibilité de la page
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                // La page n'est pas visible (veille, changement d'app, etc.)
                if (!music.paused) {
                    music.pause();
                    soundIcon.src = "src/assets/icons/sound-off.svg";
                }
            }
        });

        // Gérer la perte de focus de la fenêtre
        window.addEventListener('blur', function() {
            if (!music.paused) {
                music.pause();
                soundIcon.src = "src/assets/icons/sound-off.svg";
            }
        });

        // Gérer la mise en veille sur mobile
        window.addEventListener('pagehide', function() {
            if (!music.paused) {
                music.pause();
                soundIcon.src = "src/assets/icons/sound-off.svg";
            }
        });
    });
    </script>
  </body>
</html>
